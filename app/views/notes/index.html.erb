<% @page_title = "Notes" %>

<p id="notice"><%= notice %></p>

<h1>Listing Notes</h1>

<table class='table table-striped table-hover'>
  <thead>
    <tr>
      <th><%= generate_sortable_link('updated_at', 'Updated at') %></th>
      <th>Connected to</th>
      <th>Contents</th>
      <th class='actions' colspan="2">Actions</th>
    </tr>
  </thead>

  <tbody>
    <% @notes.each do |note| %>
      <% default_link_dest = [note.notable, note] %>
      <% notable_link_dest = generate_notable_link_dest(note) %>
      <% updated_at = note.updated_at.to_s('month date year')%>
      <tr>
        <td><%= link_to updated_at, default_link_dest %></td>
        <td><%= link_to note.notable_name, notable_link_dest %></td>
        <td><%= link_to(truncate(note.contents), default_link_dest) %></td>
        <td><%= link_to 'Edit', [:edit, note.notable, note] %></td>
        <td><%= link_to 'Destroy', default_link_dest, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

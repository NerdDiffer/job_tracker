<% @page_title = 'Cover Letters' %>

<h1 class='allow_inline'>Cover Letters</h1>

<% locals = { resource_name: 'cover letter' } %>
<%= render(partial: 'job_applications/faq_add_new', locals: locals) %>

<table class='table table-striped table-hover cover_letters index'>
  <thead>
    <tr>
      <th><%= generate_sortable_link('job_application_title', title: 'Job Application') %></th>
      <th><%= generate_sortable_link('sent_date', title: 'Sent') %></th>
      <th>Content</th>
      <th class='actions'>Actions</th>
    </tr>
  </thead>

  <tbody>
    <% @cover_letters.each do |cover_letter| %>
      <% job_application = cover_letter.job_application %>
      <% content = truncate(cover_letter.content) %>
      <% default_link_dest = job_application_cover_letter_path(job_application) %>

      <tr>
        <td><%= link_to job_application.title, job_application %></td>
        <td><%= cover_letter.sent_date %></td>
        <td><%= link_to(content, default_link_dest) %></td>
        <td>
          <%= link_to 'Edit', edit_job_application_cover_letter_path(job_application) %><br />
          <%= link_to 'Delete', default_link_dest, delete_link_opts %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

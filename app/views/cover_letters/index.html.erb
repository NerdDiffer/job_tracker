<% @page_title = 'Cover Letters' %>

<p id="notice"><%= notice %></p>

<h1>Listing Cover Letters</h1>

<table class='table table-striped table-hover'>
  <thead>
    <tr>
      <th><%= generate_sortable_link('job_application_title', title: 'Job Application') %></th>
      <th><%= generate_sortable_link('sent_date', title: 'Sent') %></th>
      <th>Content</th>
      <th class='actions' colspan="2">Actions</th>
    </tr>
  </thead>

  <tbody>
    <% @cover_letters.each do |cover_letter| %>
      <% job_application = cover_letter.job_application %>
      <% content = truncate(cover_letter.content) %>
      <% default_link_dest = job_application_cover_letter_path(job_application) %>
      <% destroy_link_opts = {
        method: :delete, data: { confirm: 'Are you sure?' }
      } %>

      <tr>
        <td><%= link_to job_application.title, job_application %></td>
        <td><%= cover_letter.sent_date %></td>
        <td><%= link_to(content, default_link_dest) %></td>
        <td><%= link_to 'Edit', edit_job_application_cover_letter_path(job_application) %></td>
        <td><%= link_to 'Destroy', default_link_dest, destroy_link_opts %></td>
      </tr>
    <% end %>
  </tbody>
</table>
